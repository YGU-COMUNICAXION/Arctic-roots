---
import { getImage } from "astro:assets";
interface Props {
  backgroundImage: ImageMetadata;
  align?: "center" | "left";
  contentWidth?: "full" | "half";
}

const {
  backgroundImage,
  align = "center",
  contentWidth = align === "left" ? "half" : "full",
} = Astro.props as Props;

const sectionAlignmentClasses =
  align === "left" ? "items-start text-left" : "items-center text-center";

const slotWrapperClasses = [
  "w-full",
  align === "center" && "mx-auto max-w-4xl",
  align === "left" && "text-left lg:w-1/2 xl:w-5/12",
  align === "center" && "text-center",
  contentWidth === "half" && align === "center" && "lg:w-1/2 xl:w-5/12",
]
  .filter(Boolean)
  .join(" ");

const optimzedImage = await getImage({
  src: backgroundImage,
  widths: [400, 800, 1200, 1600, 2000],
  formats: ["avif", "webp", "jpeg"],
  quality: 80,
});
---

<section
  class={`w-full h-[60vh] md:h-[80vh] lg:h-[90vh] flex flex-col justify-center px-4 md:px-8 lg:px-16 ${sectionAlignmentClasses}`}
  style={`background-image: url(${optimzedImage.src}); background-size: cover; background-position: center;`}
>
  <!-- contenido dinÃ¡mico -->
  <main class={`${slotWrapperClasses} flex flex-col gap-6`}>
    <slot />
  </main>
</section>
